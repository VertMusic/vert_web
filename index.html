<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Vert Music</title>
  
  <!--script src="http://code.jquery.com/jquery-2.1.0.js"></script>
  <script src="http://builds.handlebarsjs.com.s3.amazonaws.com/handlebars-v1.3.0.js"></script>
  <script src="http://builds.emberjs.com/tags/v1.8.1/ember.js"></script>
  <script src="http://getbootstrap.com/dist/js/bootstrap.js"></script>
  <script src="assets/js/bootstrap-transition.js"></script>
  <script src="assets/js/bootstrap-modal.js"></script-->
  
  <link rel="stylesheet" href="css/normalize.css">
  <link rel="stylesheet" href="css/bootstrap.min.css">
  <link rel="stylesheet" href="css/style.css">
  
</head>
<body>   
 
<!--------------------------------------------------------------------------------------------------------------------------------------------------------------
                                                             MAIN APPLICATION/PAGE TEMPLATE
--------------------------------------------------------------------------------------------------------------------------------------------------------------->
  
  <script type="text/x-handlebars">
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container-fluid">
        <div class="navbar-header">
          <a class="navbar-brand" href="#"><img alt="Vert" src="image/vert_logo.png" class="img-responsive"/></a>
        </div>
          <ul class="nav navbar-nav navbar-right">
            {{#if session.isAuthenticated}}
              <li>{{#link-to 'playlists'}} Playlists {{/link-to}}</li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
                  {{session.authUser.username}} <span class="caret"></span>
                </a>
                <ul class="dropdown-menu" role="menu">
                  <li><a href="#">Settings</a></li>
                  <li>{{#link-to 'about'}} About {{/link-to}}</li>
                  <li><a href="#">Help</a></li>
                  <li class="divider"></li>
                  <li>{{#link-to 'session.destroy'}} Logout {{/link-to}}</li>
                </ul>
              </li>
            {{else}}
              <li>{{#link-to 'register'}} Register {{/link-to}}</li>
              <li>{{#link-to 'login'}} Login {{/link-to}}</li>
            {{/if}}
          </ul>
      </div>
    </nav>
    {{outlet}}
    {{outlet 'modal'}}
  </script>
  
<!-------------------------------------------------------------------------------------------------------------------------------------------------------------- 
                                                                PLAYLISTS NAVIGATION TEMPLATE
--------------------------------------------------------------------------------------------------------------------------------------------------------------->
  
  <script type="text/x-handlebars" id="playlists">
    <div class="container-fluid">
      <div class="row-fluid">
        <div class="col-md-3">
          <table class="table">
            <thead>
              <tr><th>Playlists</th></tr>
            </thead>
            {{#each}}
              <tr><td>
                <!-- links to specific playlist: "this" specifies which model to use  -->
                {{#link-to 'playlist' this}}
                  {{name}} <small class="muted">by {{author}}</small>
                {{/link-to}}
              </td></tr>
            {{/each}}           
            {{#if isAdding}}
              <tr><td colspan="4">
                {{focus-input type="text" value=playlistName action="saveNew"}}
                <button class="btn btn-primary" {{action "saveNew"}}>Add</button>
              </td></tr>
            {{else}}
              <tr><td colspan="4"><a id="add-playlist" {{action "addNew"}}>+ Add Playlist</a></td></tr>
            {{/if}}
          </table>
        </div>      
        <div class="col-md-9">
            {{outlet}}
        </div>     
      </div>
    </div>
  </script>
  
<!-------------------------------------------------------------------------------------------------------------------------------------------------------------- 
                                                                  SINGLE PLAYLIST PAGE TEMPLATE 
--------------------------------------------------------------------------------------------------------------------------------------------------------------->
  
  <script type="text/x-handlebars" id="playlist">
    <div class="container-fluid">
      <div class="row-fluid">         
        <!-- Allows inline editing of name: This is tied to the PlaylistController   -->
        {{#if isEditing}}
          <h1 class="edit">
            {{focus-input type="text" value=name action="doneEditing"}}
            <button class="btn btn-primary float-right" {{action 'doneEditing'}}>Done</button>
          </h1>
        {{else}}
          <h1 {{action 'edit'}} class="editable-field" title="Click to edit">{{name}}</h1>
        {{/if}}
        <h4 class="playlist-subheading">by {{author}}<small class="muted">&nbsp;({{format-date date}})</small></h4>
      <hr/>
        <table class="table table-striped">
          <thead>
            <tr>
              <td>Title</td>  
              <td>Artist</td>
              <td>Duration</td>
              <td>Play</td>
            </tr>  
          </thead>
          <tbody>
            <!-- TODO: Place handlebars templating for song data here -->
            <tr>
				<td colspan="4">
					<a id="add-playlist" {{action 'showModal' 'song-modal' model}}>+ Add Song</a>
				</td>
			</tr>
          </tbody>
        </table>
    </div> 
  </script> 
      
  <script type="text/x-handlebars" data-template-name="song-modal">
	{{#my-modal title='Adding a Song' ok='save' close='removeModal' }}
		<form {{action 'ok' on='submit' target=view}}>
			<div class="form-group">
				<label>SELECT YOUR SONG:</label>
				{{input class="form-control" value=song}}		
			</div>
		</form>
	{{/my-modal}}
  </script>	
      
  <script type="text/x-handlebars" data-template-name="components/my-modal">
	<div class="modal fade">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
					<h4 class="modal-title">{{title}}</h4>
				</div>
				<div class="modal-body">
					{{yield}}
				</div>
				<div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
					<button type="button" class="btn btn-primary" {{action 'ok'}}>Save</button>
				</div>
			</div>
		</div>
	</div>
  </script>

<!-------------------------------------------------------------------------------------------------------------------------------------------------------------- 
                                                                       ABOUT PAGE TEMPLATE
--------------------------------------------------------------------------------------------------------------------------------------------------------------->
  
  <script type="text/x-handlebars" id="about">
    <div class="container">
      <div class="row-fluid">
        <p>
          Vert is a music storage and sharing platform. Upload songs and access them from anywhere on your computer 
          or mobile devices. Playlists can be marked private and will only be seen by you, or share your list of tunes 
          with the entire user community by making one public.
        </p>
      </div>
    </div>
  </script>
    
<!-------------------------------------------------------------------------------------------------------------------------------------------------------------- 
                                                                    REGISTRATION PAGE TEMPLATE
--------------------------------------------------------------------------------------------------------------------------------------------------------------->
  
  <script type="text/x-handlebars" id="register">
    <div class="container">
      <!--div class="row"-->
        <div class="span6 well center">
          <legend>Register</legend>
          <form {{action "createUser" this on="submit"}}>
            <div>
              <label>Full Name</label>
              {{input type="text" valueBinding="name" placeholder="Full Name"}}
            </div>
            <div>
              <label>Email Address</label>
              {{input type="email" valueBinding="email" placeholder="Email Address"}}
            </div>
            <div>
              <label>Username</label>
              {{input type="text" valueBinding="username" placeholder="Username"}}
            </div>
            <div>
              <label>Password</label>
              {{input type="password" valueBinding="password" placeholder="Password"}}
            </div>
            <br>
            <button {{action "reset"}} class="btn">Reset</button>
            <button type="submit" class="btn btn-primary">Submit</button>
          </form>
        </div>
      <!--/div-->
    </div>
  </script>

<!--------------------------------------------------------------------------------------------------------------------------------------------------------------
                                                                        LOGIN PAGE TEMPLATE
--------------------------------------------------------------------------------------------------------------------------------------------------------------->
  
  <script type="text/x-handlebars" id="login">
    <div class="container">
      <div class="row">
		<div class="span4 center well">
          <legend>Please Sign In</legend>
            {{#if loginFailed}}
              <div class="alert alert-error">
                Incorrect Username or Password!
              </div>
            {{/if}}
            <form {{action 'login' this on="submit"}}>
			  {{input valueBinding="username" class="span4" type="text" placeholder="Username"}}
			  {{input valueBinding="password" class="span4" type="password" placeholder="Password"}}
              <label class="checkbox">
                {{input type="checkbox" checked=remember class="toggle"}} Remember Me
              </label>
              </br>
			  <button type="submit" name="submit" class="btn btn-primary btn-block">Sign in</button>
                <a {{action "forgotPassword"}}>Forgot Password?</a>
			</form>    
		</div>
	  </div>
    </div>
  </script>
  
<!--------------------------------------------------------------------------------------------------------------------------------------------------------------
                                                                   LIBRARIES/FILES
--------------------------------------------------------------------------------------------------------------------------------------------------------------->  
  
  <!-- External libraries. NOTE: Order matters here -->
  <script src="//code.jquery.com/jquery-1.11.2.min.js"></script>
  <script src="js/third-party/jquery.cookie.js"></script>
    <script src="js/third-party/bootstrap.min.js"></script>
  <script src="js/third-party/handlebars-v2.0.0.js"></script>
  <script src="js/third-party/ember-1.9.1.js"></script>
  <script src="http://builds.emberjs.com/beta/ember-data.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.1.0/moment.min.js"></script>
  
  <!-- Vert library files. NOTE Order matters here -->
  <script src="js/lib/initializer.js"></script>
  <script src="js/lib/adapter.js"></script>
  <script src="js/lib/route.js"></script>
  <script src="js/lib/controller.js"></script>
  <script src="js/lib/model.js"></script>
  <script src="js/lib/component.js"></script>
  
</body>
</html>
